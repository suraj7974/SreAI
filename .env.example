# SRE Agent Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# GOOGLE GEMINI AI CONFIGURATION (REQUIRED)
# =============================================================================
# Get your free API key from: https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=AIzaSy_your_gemini_api_key_here
GOOGLE_MODEL=gemini-2.0-flash-exp
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=4096

# =============================================================================
# PROMETHEUS & GRAFANA MONITORING (NEW AGENT SYSTEM)
# =============================================================================
# Prometheus server URL (metrics storage and queries)
PROMETHEUS_URL=http://prometheus:9090

# Grafana URL (dashboards and visualization)
GRAFANA_URL=http://grafana:3000
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# Alertmanager URL (alert routing and notifications)
ALERTMANAGER_URL=http://alertmanager:9093

# =============================================================================
# TARGET VMs - Add your monitored servers here
# =============================================================================
# Comma-separated list of Node Exporter endpoints to monitor
# Format: host:port (default port is 9100)
# Example: 192.168.1.10:9100,192.168.1.11:9100
TARGET_NODE_EXPORTERS=localhost:9100

# =============================================================================
# SSH CONFIGURATION (For remediation actions)
# =============================================================================
# Default SSH credentials for remediation commands
SSH_USER=sre-demo
SSH_KEY_PATH=/home/yourusername/.ssh/ai_chaos_handler
SSH_PORT=22

# Legacy SSH Config (for backward compatibility with old app/)
AI_CHAOS_SSH_KEY_PATH=/home/yourusername/.ssh/ai_chaos_handler
AI_CHAOS_SSH_USER=sre-demo
AI_CHAOS_SSH_HOST=YOUR_VM_IP_HERE
AI_CHAOS_SSH_PORT=22

# =============================================================================
# API SECURITY
# =============================================================================
# Generate with: openssl rand -hex 32
API_AUTH_TOKEN=your-super-secret-token-here

# =============================================================================
# STORAGE
# =============================================================================
INCIDENT_STORAGE_PATH=./incidents

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000,http://grafana:3000

# =============================================================================
# SLACK INTEGRATION (OPTIONAL)
# =============================================================================
# Webhook URL for sending notifications
SLACK_WEBHOOK_URL=
# Channel to post to (without #)
SLACK_CHANNEL=sre-alerts

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
HOST=0.0.0.0
PORT=8000
DEBUG=False
LOG_LEVEL=INFO

# =============================================================================
# AGENT BEHAVIOR CONFIGURATION
# =============================================================================
# How often to run monitoring checks (seconds)
MONITOR_INTERVAL=60

# Thresholds for anomaly detection
CPU_THRESHOLD_WARNING=70
CPU_THRESHOLD_CRITICAL=90
MEMORY_THRESHOLD_WARNING=70
MEMORY_THRESHOLD_CRITICAL=85
DISK_THRESHOLD_WARNING=70
DISK_THRESHOLD_CRITICAL=85

# Whether to auto-diagnose when anomalies are detected
AUTO_DIAGNOSE=true

# Whether remediation requires human approval (recommended: true)
REQUIRE_HUMAN_APPROVAL=true
